/*!
 * 基于jQuery的星级评价小插件
 *
 * @link https://github.com/zhanguangcheng/jquery-star-rating
 * @author Grass <14712905@qq.com>
 * @version 0.2
 */
(function(a){if(typeof define=="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports=="object"){module.exports=a(require("jquery"))}else{a(jQuery)}}})(function(e){var a={readonly:false,defaultStar:0,starNumber:5,step:0.5,theme:"default",eventHover:function(g,h,f){},eventOut:function(g,h,f){},eventChange:function(g,h,f){},starWidth:24,starHeight:24};var b={};var d=function(f){if(b[f]){return}b[f]=true;var g=document.getElementsByTagName("head")[0];var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=f;g.appendChild(h)};var c=(function(){var f=document.currentScript?document.currentScript.src:function(){var g=document.scripts;var j=g.length-1;for(var h=j;h>0;h--){if("interactive"===g[h].readyState){return g[h].src}}return g[j].src}();return f.substring(0,f.lastIndexOf("/")+1)})();e.fn.starRating=function(h){h=e.extend({},a,h);d(c+"theme/"+h.theme+"/star-rating.css");var f=function(i){return Math.ceil((i/h.starWidth).toFixed(1)/h.step)/(1/h.step)};var g=function(i,j){var k=h.starHeight*2;if(j==h.starNumber){k=h.starHeight*3}else{if(j>=h.starNumber*0.6){k=h.starHeight}}e(".choose-star",i).css({width:h.starWidth*h.step*j*(1/h.step),backgroundPosition:"left -"+k+"px"})};e.each(this,function(){var l=e(this);var i={};e.each(["readonly","defaultStar","starNumber","step","theme","starWidth","starHeight"],function(n,m){if(l.data(m)){i[m]=l.data(m)}});h=e.extend({},h,i);var j=h.defaultStar;var k;l.bind("starRating:hover",h.eventHover);l.bind("starRating:out",h.eventOut);l.bind("starRating:change",h.eventChange);l.html('<div class="choose-star"></div>');l.addClass("star-rating-wrap");l.css({width:h.starWidth*h.starNumber,height:h.starHeight});l.find(".choose-star").css({width:h.starWidth*h.defaultStar,height:h.starHeight});g(l,j);if(h.readonly){return}l.on("mousemove",function(m){var n=f(m.offsetX);if(k!=n){k=n;g(l,n);l.trigger("starRating:hover",[n,h])}}).on("mouseleave",function(m){g(l,j);k=j;l.trigger("starRating:out",[j,h])}).on("click",function(m){j=f(m.offsetX);l.attr("data-star",j);l.trigger("starRating:change",[j,h])})})}});
